<div class="row justify-content-md-center">
  <div class="col-12 text-center mb-6 mg-general">
    <h1># Tic-Tac-Toe - Partida #{{ gameData.gameId }}</h1>
    <span class="badge badge-primary" *ngIf="sending"><i class="fa fa-spin fa-refresh"></i> ENVIANDO...</span>
    <span class="badge badge-success" *ngIf="!sending && !gameOver"><i class="fa fa-table"></i> EN JUEGO</span>
  </div>

  <div class="col">
    <h3 class="text-center">
      {{ gameData.firstPlayer.nick }}
      <small>
        <i class="fa pointer" [ngClass]="{'fa-pencil': !playerNameToEdit, 'fa-close': playerNameToEdit}"
           (click)="playerNameToEdit = (!playerNameToEdit)"></i>
      </small>
    </h3>

    <div class="col-12 text-center" *ngIf="playerNameToEdit">
      <app-player-name [gameId]="gameData.gameId" [playerId]="gameData.firstPlayer.id" (playerNameChanged)="changePlayerName($event)" ></app-player-name>
    </div>

    <br>
    <img src="./assets/img/firstPlayer.png" alt="firstPlayer" height="150" width="150" class="img-game center-c">
    <br>
    <div class="text-center">
      <span class="badge badge-success" *ngIf="gameOver && winnerId === gameData.firstPlayer.id "><i
        class="fa fa-check-circle" aria-hidden="true"></i> ¡¡ ERES EL GANADOR !!</span> <br><br>
      <span class="badge badge-primary" *ngIf="gameData.firstPlayer.id === currentTurn && !gameOver">TURNO ACTUAL</span>
      <span class="badge badge-secondary"
            *ngIf="gameData.firstPlayer.id !== currentTurn && !gameOver">ESPERA TU TURNO</span>
    </div>
  </div>

  <div class="col text-center">

    <table class="table table-bordered game-table">
      <tbody>
      <tr>
        <td (click)="selectedBoxes(1)" [ngClass]="{'box-winner': winnerBoxes['box_1'] }">
          <div class="text-game">{{ gameData.boxes['box_1'].value }}</div>
        </td>
        <td (click)="selectedBoxes(2)" [ngClass]="{'box-winner': winnerBoxes['box_2'] }">
          <div class="text-game">{{ gameData.boxes['box_2'].value }}</div>
        </td>
        <td (click)="selectedBoxes(3)" [ngClass]="{'box-winner': winnerBoxes['box_3'] }">
          <div class="text-game">{{ gameData.boxes['box_3'].value }}</div>
        </td>
      </tr>
      <tr>
        <td (click)="selectedBoxes(4)" [ngClass]="{'box-winner': winnerBoxes['box_4'] }">
          <div class="text-game">{{ gameData.boxes['box_4'].value }}</div>
        </td>
        <td (click)="selectedBoxes(5)" [ngClass]="{'box-winner': winnerBoxes['box_5'] }">
          <div class="text-game">{{ gameData.boxes['box_5'].value }}</div>
        </td>
        <td (click)="selectedBoxes(6)" [ngClass]="{'box-winner': winnerBoxes['box_6'] }">
          <div class="text-game">{{ gameData.boxes['box_6'].value }}</div>
        </td>
      </tr>
      <tr>
        <td (click)="selectedBoxes(7)" [ngClass]="{'box-winner': winnerBoxes['box_7'] }">
          <div class="text-game">{{ gameData.boxes['box_7'].value }}</div>
        </td>
        <td (click)="selectedBoxes(8)" [ngClass]="{'box-winner': winnerBoxes['box_8'] }">
          <div class="text-game">{{ gameData.boxes['box_8'].value }}</div>
        </td>
        <td (click)="selectedBoxes(9)" [ngClass]="{'box-winner': winnerBoxes['box_9'] }">
          <div class="text-game">{{ gameData.boxes['box_9'].value }}</div>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="col-12 text-center mb-6" style="margin-top: 5%; margin-bottom: 5%">
      <button type="button" class="btn btn btn-warning" (click)="resetGame()"
              *ngIf="gameOver"
              [disabled]="sending || sendingReset">
        Reiniciar
      </button> &nbsp; &nbsp;
      <button type="button" class="btn btn-outline-dark" (click)="logout()" [disabled]="sending || sendingReset">Salir
      </button>
    </div>

  </div>

  <div class="col">
    <h3 class="text-center">{{ gameData.secondPlayer.nick }}</h3>
    <br>
    <img src="./assets/img/firstPlayer.png" alt="secondPlayer" height="150" width="150" class="img-game center-c">
    <br>
    <div class="text-center">
      <span class="badge badge-success" *ngIf="gameOver && winnerId === gameData.secondPlayer.id "><i
        class="fa fa-check-circle" aria-hidden="true"></i> ¡¡ ERES EL GANADOR !!</span><br><br>
      <span class="badge badge-primary"
            *ngIf="gameData.secondPlayer.id === currentTurn && !gameOver">TURNO ACTUAL</span>
      <span class="badge badge-secondary"
            *ngIf="gameData.secondPlayer.id !== currentTurn && !gameOver">ESPERA TU TURNO</span>
    </div>
  </div>

</div>
